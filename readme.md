# 東方スクールオブフィッシュ

## 概要

「東方スクールオブフィッシュ」は、東方Projectのイントロクイズ/カルトクイズの練習を目的としたデスクトップアプリケーションです。

お手持ちの楽曲ファイルと、それに対応する情報を記載したCSVファイルを用意することで、楽曲の検索、再生、そして（将来的には）イントロクイズの演習が可能になります。

## 主な機能（現在利用可能な機能）

*   **初期設定**:
    *   音楽ファイルが保存されているフォルダを指定できます。
    *   楽曲情報が記載されたCSVファイルを指定できます。
*   **聴取モード**:
    *   CSVファイルに基づいた楽曲リストを2列表示（楽曲名、キャラクター）で表示します。
    *   **検索機能**: 楽曲名またはキャラクター名でフリーワード検索ができます。
    *   **詳細絞り込み機能**（折りたたみ式）:
        *   **タイプ**: 初出、アレンジ、再録などをチェックボックスで複数選択
        *   **シリーズ区分**: 旧作、現行、西方等、黄昏などをチェックボックスで複数選択
        *   **作品名**: 登場作品をチェックボックスで複数選択
        *   **場面**: ステージ・場面をラジオボタンで単一選択
    *   リストから選択した楽曲の詳細情報を箇条書きで表示します（タイプ、シリーズ区分、作品名、場面、キャラクター）。
    *   選択した楽曲を再生、一時停止、停止できます。
    *   音量を調整できます。
*   **演習モード**:
    *   **出題絞り込み**: 聴取モードと同様の詳細絞り込み機能で出題範囲を設定（折りたたみ式パネル）
    *   **回答方式の選択**:
        *   **完全一致モード**: 楽曲を自動再生し、曲名を入力して回答（Enterキー対応）
        *   **ボタン回答モード**: 4択から正解を選択（最低4曲必要）
    *   **ランダム出題**: 絞り込み条件内からランダムに楽曲を出題
    *   **リアルタイム統計**: 正答率と平均回答時間をリアルタイム表示
    *   **時間計測**: 問題ごとの回答時間を計測・記録
    *   **音量調節**: 演習モード専用の音量スライダー
    *   **出題中止**: いつでもクイズを中止して結果を確認可能
*   **設定**:
    *   アプリケーション起動後に、音楽フォルダやCSVファイルのパスを再設定できます。（設定の適用には、現状手動での再起動が必要です。）

## 必要なもの

このアプリケーションを利用するには、以下のものが必要です。

1.  **東方Projectの楽曲ファイル**:
    *   MP3 (.mp3), WAV (.wav), FLAC (.flac) 形式のファイルに対応しています。
    *   これらの楽曲ファイルを1つのフォルダにまとめて保存しておいてください。作品ごとに分けるなど、フォルダ内にさらに子フォルダを作成することも可能です。
2.  **楽曲情報CSVファイル**:
    *   楽曲ファイルと対応する情報を記載したCSVファイルです。
    *   文字コードは **UTF-8** で保存してください。
    *   詳細は後述の「CSVファイルのフォーマット」を参照してください。

## セットアップと起動方法

### 1. アプリケーションのダウンロード

1.  [Releases ページ](https://github.com/your-username/touhou-school-of-fish/releases)にアクセスします。
2.  最新のリリースから、お使いのOSに対応したファイルをダウンロードしてください。
    *   **Windows (64bit)**: `Touhou.School.of.Fish-[バージョン]-win.zip` をダウンロード
    *   **macOS (Intel / Apple Silicon 両対応)**: `Touhou.School.of.Fish-[バージョン]-universal-mac.zip` をダウンロード
    *   **Linux (64bit)**: `Touhou.School.of.Fish-[バージョン].AppImage` をダウンロード

### 2. アプリケーションの起動

#### Windows の場合
1.  ダウンロードした ZIP ファイルを右クリックし、「すべて展開」を選択して任意の場所に展開します。
2.  展開されたフォルダ内の `Touhou School of Fish.exe` をダブルクリックして起動します。
3.  Windows Defender SmartScreen の警告が表示された場合は、「詳細情報」をクリックし、「実行」を選択してください。

#### macOS の場合
1.  ダウンロードした ZIP ファイルをダブルクリックして展開します。
2.  展開された `Touhou School of Fish.app` を「アプリケーション」フォルダに移動します（任意）。
3.  `Touhou School of Fish.app` をダブルクリックして起動します。
4.  「開発元が未確認のため開けません」と表示された場合は、以下の手順で起動してください。
    *   アプリを右クリック（または Control + クリック）し、「開く」を選択
    *   確認ダイアログで「開く」をクリック

#### Linux の場合
1.  ダウンロードした AppImage ファイルに実行権限を付与します。
    ```bash
    chmod +x Touhou.School.of.Fish-*.AppImage
    ```
2.  AppImage ファイルをダブルクリックするか、以下のコマンドで起動します。
    ```bash
    ./Touhou.School.of.Fish-*.AppImage
    ```

### 3. 初回設定

1.  起動すると、まず「初期設定」画面が表示されます。
2.  「音楽ファイルが保存されているフォルダ」の右にある「選択」ボタンをクリックし、事前に準備した **楽曲ファイルが入っているフォルダ** を選択します。
3.  「楽曲情報が記録されているCSVファイル」の右にある「選択」ボタンをクリックし、事前に準備した **楽曲情報CSVファイル** を選択します。
4.  「アプリケーションを開始」ボタンがクリックできるようになります。ボタンをクリックしてください。（CSVファイル単体が選択されている場合でもクリック可能になりますが、その場合は楽曲を再生することはできません）
5.  メイン画面（聴取モード）が表示されれば、セットアップは完了です。

## CSVファイルのフォーマット

楽曲情報CSVファイルは、以下の形式で作成してください。**1行目は必ずヘッダー行** としてください。文字コードは **UTF-8** で保存してください。

```csv
ファイル名,タイトル,シリーズ区分,楽曲タイプ,登場作品,キャラクター,場面
th8/th8_1_stg,幻視の夜　～ Ghostly Eyes,現行,初出,東方永夜抄,,1道中
th8/th8_1_boss,蠢々秋月　～ Mooned Insect,現行,初出,東方永夜抄,リグル・ナイトバグ,1ボス
th8/th8_2_stg,夜雀の歌声　～ Night Bird,現行,初出,東方永夜抄,,2道中
th8/th8_2_boss,もう歌しか聞こえない,現行,初出,東方永夜抄,ミスティア・ローレライ,2ボス
```

*   **ファイル名**: 音楽フォルダに入っている楽曲ファイルの名前（拡張子不要）。相対パスを指定することが可能です。この名前で音楽ファイルと情報が紐付けられます。
*   **曲名**: 楽曲の正式名称。
*   **シリーズ区分**: 「旧作」「現行」「西方等」「黄昏」などを入力します（任意）。フィルターで使用されます。
*   **楽曲タイプ**: 「初出」「アレンジ」「再録」などを入力します（任意）。フィルターで使用されます。
*   **登場作品**: 楽曲が登場する原作名など（任意）。
*   **キャラクター**: 楽曲に関連するキャラクター名など（任意）。
*   **場面**: 楽曲が使用されたステージ、場面、キャラクターのテーマ区分（例：道中、ボス、エンディング、○○のテーマ）などを入力します（任意）。フィルターで使用されます。

**注意点**:

*   各項目はカンマ（`,`）で区切ってください。
*   項目内にカンマを含める場合は、項目全体をダブルクォーテーション（`"`）で囲むなど、標準的なCSVのルールに従ってください（ただし、現在のバージョンでは複雑なCSVの扱いに対応しきれていない可能性があります）。
*   ファイル名と曲名は必須ですが、他の項目は空でも構いません。
*   CSVファイルに記載されていても、対応する音楽ファイルが指定フォルダ内に存在しない場合、その楽曲はリストに表示されません。

## 今後の開発予定

*   **演習モード（クイズ機能）の拡張**:
    *   曖昧一致モードの実装（部分一致、かな漢字変換対応など）
    *   出題時間制限機能
    *   連続正答ボーナス機能
    *   成績履歴の保存・閲覧機能
*   **設定の永続化**: アプリケーションを閉じても設定が保存されるようにします。
*   **検索・フィルタリング機能の拡張**: フィルター設定の保存機能。
*   **楽曲リスト表示の改善**: ソート機能や表示列のカスタマイズ。
*   **ビルド設定の最適化**: 配布用のファイルサイズ削減など。

## ライセンス

このソフトウェアは [MITライセンス](LICENSE) の下で公開されています。