# 東方スクールオブフィッシュ

## 概要

「東方スクールオブフィッシュ」は、東方Projectのイントロクイズ/カルトクイズの練習を目的としたデスクトップアプリケーションです。

お手持ちの楽曲ファイルと、それに対応する情報を記載したCSVファイルを用意することで、楽曲の検索、再生、そして（将来的には）イントロクイズの演習が可能になります。

**【重要】**
このアプリケーションは現在開発中のバージョン（v0.1.1）です。
**特に「演習モード（クイズ機能）」はまだ実装されていません。** 現在は主に「聴取モード」での楽曲再生と検索機能が利用可能です。今後のアップデートで機能を追加していく予定です。

## 主な機能（現在利用可能な機能）

*   **初期設定**:
    *   音楽ファイルが保存されているフォルダを指定できます。
    *   楽曲情報が記載されたCSVファイルを指定できます。
*   **聴取モード**:
    *   CSVファイルに基づいた楽曲リストを表示します。
    *   曲名で楽曲を検索できます。
    *   「初出曲のみ」「アレンジ曲のみ」で絞り込み表示ができます。
    *   リストから選択した楽曲の情報を表示します（曲名、登場作品、タイプ、キャラクターなど）。
    *   選択した楽曲を再生、一時停止、停止できます。
    *   音量を調整できます。
*   **設定**:
    *   アプリケーション起動後に、音楽フォルダやCSVファイルのパスを再設定できます。（設定の適用には、現状手動での再起動が必要です。）

## 必要なもの

このアプリケーションを利用するには、以下のものが必要です。

1.  **Node.js と npm**: アプリケーションを実行するために必要です。インストールされていない場合は、[Node.js 公式サイト](https://nodejs.org/)からダウンロードしてインストールしてください。npm は Node.js に付属しています。
2.  **東方Projectの楽曲ファイル**:
    *   MP3 (.mp3), WAV (.wav), FLAC (.flac) 形式のファイルに対応しています。
    *   これらの楽曲ファイルを1つのフォルダにまとめて保存しておいてください。作品ごとに分けるなど、フォルダ内にさらに子フォルダを作成することも可能です。
3.  **楽曲情報CSVファイル**:
    *   楽曲ファイルと対応する情報を記載したCSVファイルです。
    *   文字コードは **UTF-8** で保存してください。
    *   詳細は後述の「CSVファイルのフォーマット」を参照してください。

## セットアップと起動方法

### 1. アプリケーションの準備

*   このリポジトリ（プロジェクトファイル一式）をダウンロード、または Git を使ってクローンします。
    *   **ダウンロードの場合**: 右上にある「Code」ボタンをクリックし、「Download ZIP」を選択してダウンロード後、任意の場所に展開（解凍）してください。
    *   **Git の場合**: ターミナル（macOS や Linux）またはコマンドプロンプト（Windows）で以下のコマンドを実行します。
        ```bash
        git clone https://github.com/your-username/touhou-school-of-fish.git # (リポジトリのURLは適宜変更してください)
        ```

### 2. 必要なライブラリのインストール

1.  ターミナルまたはコマンドプロンプトを開きます。
2.  `cd` コマンドを使って、ダウンロードまたはクローンした **プロジェクトのフォルダに移動** します。
    ```bash
    cd path/to/touhou-school-of-fish # (実際のフォルダパスに置き換えてください)
    ```
3.  以下のコマンドを実行して、アプリケーションが必要とするライブラリ（依存パッケージ）をインストールします。インターネット接続が必要です。
    ```bash
    npm install
    ```
    `node_modules` というフォルダが作成されれば成功です。

### 3. アプリケーションの起動

1.  引き続き、ターミナルまたはコマンドプロンプトで、プロジェクトフォルダにいることを確認してください。
2.  以下のコマンドを実行します。
    ```bash
    npm start
    ```
3.  アプリケーションのウィンドウが表示されます。

### 4. 初回設定

1.  起動すると、まず「初期設定」画面が表示されます。
2.  「音楽ファイルが保存されているフォルダ」の右にある「選択」ボタンをクリックし、事前に準備した **楽曲ファイルが入っているフォルダ** を選択します。
3.  「楽曲情報が記録されているCSVファイル」の右にある「選択」ボタンをクリックし、事前に準備した **楽曲情報CSVファイル** を選択します。
4.  「アプリケーションを開始」ボタンがクリックできるようになります。ボタンをクリックしてください。（CSVファイル単体が選択されている場合でもクリック可能になりますが、その場合は楽曲を再生することはできません）
5.  メイン画面（聴取モード）が表示されれば、セットアップは完了です。

## CSVファイルのフォーマット

楽曲情報CSVファイルは、以下の形式で作成してください。**1行目は必ずヘッダー行** としてください。文字コードは **UTF-8** で保存してください。

```csv
ファイル名,曲名,旧作or現行,初出orアレンジ,登場作品,担当キャラクター
01_track.mp3,不思議の国のアリス,旧作,初出,東方怪綺談,アリス
02_track.flac,人形裁判　～ 人の形弄びし少女,現行,初出,東方妖々夢,アリス・マーガトロイド
03_another.wav,ブクレシュティの人形師 -Rearrange-,現行,アレンジ,東方求聞史紀,アリス・マーガトロイド
... (以下、他の楽曲情報を続ける)
```

*   **ファイル名**: 音楽フォルダに入っている楽曲ファイルの名前（拡張子不要）。相対パスを指定することが可能です。この名前で音楽ファイルと情報が紐付けられます。
*   **曲名**: 楽曲の正式名称。
*   **旧作or現行**: 「旧作」または「現行」を入力します（任意）。
*   **初出orアレンジ**: 「初出」または「アレンジ」を入力します（任意）。聴取モードのフィルタリングで使用されます。
*   **登場作品**: 楽曲が登場する原作名など（任意）。
*   **担当キャラクター**: 楽曲に関連するキャラクター名など（任意）。

**注意点**:

*   各項目はカンマ（`,`）で区切ってください。
*   項目内にカンマを含める場合は、項目全体をダブルクォーテーション（`"`）で囲むなど、標準的なCSVのルールに従ってください（ただし、現在のバージョンでは複雑なCSVの扱いに対応しきれていない可能性があります）。
*   ファイル名と曲名は必須ですが、他の項目は空でも構いません。
*   CSVファイルに記載されていても、対応する音楽ファイルが指定フォルダ内に存在しない場合、その楽曲はリストに表示されません。

## 今後の開発予定

*   **演習モード（クイズ機能）の実装**:
    *   イントロ再生
    *   回答入力（テキスト、ボタン選択など）
    *   正誤判定
    *   結果表示
    *   出題範囲の絞り込み機能強化
*   **CSVパースライブラリの導入**: より安定したCSVファイルの読み込み（PapaParse の利用）。
*   **音声再生ライブラリの活用**: より高度な音声制御（Howler.js の利用）。
*   **設定の永続化**: アプリケーションを閉じても設定が保存されるようにします。
*   **UI/UX の改善**: より使いやすいインターフェースを目指します。
*   **ビルド設定の最適化**: 配布用のファイルサイズ削減など。

## ライセンス

このソフトウェアは [MITライセンス](LICENSE) の下で公開されています。